# 노션 견적서 웹 뷰어 개발 로드맵

노션에서 작성한 견적서를 클라이언트가 웹으로 확인하고 PDF로 다운로드 받을 수 있는 서비스

## 개요

**노션 견적서 웹 뷰어**는 1인 개발자를 위한 MVP로 다음 기능을 제공합니다:

- **노션 기반 견적서 관리**: 별도 관리 시스템 없이 노션에서 직접 견적서 작성/관리
- **간편한 공유**: UUID 기반 비공개 링크로 클라이언트에게 견적서 공유
- **전문적인 견적서 뷰어**: 깔끔한 웹 페이지로 견적서 확인
- **PDF 다운로드**: 클라이언트가 직접 PDF로 저장 가능

## 개발 워크플로우

1. **작업 계획**

- 기존 코드베이스를 학습하고 현재 상태를 파악
- 새로운 작업을 포함하도록 `ROADMAP.md` 업데이트
- 우선순위 작업은 마지막 완료된 작업 다음에 삽입

2. **작업 생성**

- 기존 코드베이스를 학습하고 현재 상태를 파악
- `/tasks` 디렉토리에 새 작업 파일 생성
- 명명 형식: `XXX-description.md` (예: `001-setup.md`)
- 고수준 명세서, 관련 파일, 수락 기준, 구현 단계 포함
- **API/비즈니스 로직 작업 시 "## 테스트 체크리스트" 섹션 필수 포함 (Playwright MCP 테스트 시나리오 작성)**

3. **작업 구현**

- 작업 파일의 명세서를 따름
- 기능과 기능성 구현
- **🔴 구현-테스트 사이클 필수 준수:**
  1. 기능 구현 완료
  2. Playwright MCP로 테스트 수행 (`browser_navigate`, `browser_snapshot` 등)
  3. 테스트 실패 시 수정 후 재테스트
  4. 모든 테스트 통과 확인
- 각 단계 후 작업 파일 내 단계 진행 상황 업데이트
- **테스트 결과 스크린샷을 작업 파일에 기록**
- 테스트 통과 확인 후 다음 단계로 진행
- 각 단계 완료 후 중단하고 추가 지시를 기다림

4. **로드맵 업데이트**

- 로드맵에서 완료된 작업을 ✅로 표시

## 개발 단계

**📅 최종 업데이트**: 2026-02-07
**📊 진행 상황**: Phase 3 완료 (11/13 Tasks 완료)

---

### Phase 1: 애플리케이션 골격 구축 ✅

- **Task 001: 프로젝트 구조 및 라우팅 설정** ✅ - 완료
  - ✅ Next.js App Router 기반 전체 라우트 구조 생성
  - ✅ `/quotes/[uuid]` 동적 라우트 페이지 생성
  - ✅ 루트 레이아웃 및 메타데이터 설정
  - ✅ 로딩/에러 상태 페이지 껍데기 생성

- **Task 002: 타입 정의 및 인터페이스 설계** ✅ - 완료
  - ✅ `IQuote`, `IQuoteItem` TypeScript 인터페이스 정의
  - ✅ `QuoteStatus` 타입 정의 (작성중/발송완료/승인/거절)
  - ✅ Notion API 응답 타입 정의
  - ✅ 환경 변수 타입 정의 (`src/lib/env.ts`)

- **Task 003: 공통 레이아웃 및 컨테이너 구현** ✅ - 완료
  - ✅ 레이아웃 컨테이너 컴포넌트 구현
  - ✅ 반응형 컨테이너 스타일 적용
  - ✅ 기본 페이지 래퍼 구조 완성

### Phase 2: UI/UX 완성 (더미 데이터 활용) ✅

- **Task 004: shadcn/ui 컴포넌트 설치 및 설정** ✅ - 완료
  - ✅ 필요한 shadcn/ui 컴포넌트 추가 (card, table, badge, separator)
  - ✅ 디자인 시스템 색상 팔레트 설정
  - ✅ 상태별 배지 스타일 정의 (대기/승인/거절/만료)

- **Task 005: 견적서 컴포넌트 라이브러리 구현** ✅ - 완료
  - ✅ `QuoteHeader` 컴포넌트 (견적서 번호, 날짜, 상태)
  - ✅ `QuoteParties` 컴포넌트 (발행자/고객 정보)
  - ✅ `QuoteItems` 컴포넌트 (항목 테이블)
  - ✅ `QuoteSummary` 컴포넌트 (합계 및 비고)
  - ✅ `QuoteActions` 컴포넌트 (PDF 다운로드 버튼)

- **Task 006: 견적서 뷰어 페이지 UI 완성** ✅ - 완료
  - ✅ 더미 데이터로 견적서 페이지 구현
  - ✅ 반응형 디자인 적용 (모바일/태블릿/데스크톱)
  - ✅ 인쇄 친화적 스타일 적용
  - ✅ 로딩 스켈레톤 UI 구현

- **Task 007: 에러 페이지 및 홈페이지 UI 구현** ✅ - 완료
  - ✅ 404 페이지 구현 (견적서를 찾을 수 없음)
  - ✅ 홈페이지 구현 (서비스 소개 또는 안내 문구)
  - ✅ 만료된 견적서 배지 표시 로직

### Phase 3: 핵심 기능 구현 ✅

- **Task 008: Notion API 클라이언트 설정** ✅ - 완료
  - ✅ `@notionhq/client` 패키지 설치 및 설정
  - ✅ Notion 클라이언트 초기화 (`src/lib/notion/client.ts`)
  - ✅ 환경 변수 연결 및 검증
  - ✅ Playwright MCP를 활용한 API 연결 테스트

- **Task 009: Notion 데이터 조회 및 변환 함수 구현** ✅ - 완료
  - ✅ UUID로 견적서 조회 함수 (`getQuoteByUUID`)
  - ✅ 견적 항목 조회 함수 (Relation 데이터)
  - ✅ Notion 응답 → TypeScript 타입 변환 함수
  - ✅ Playwright MCP를 활용한 데이터 조회 테스트

- **Task 010: 서버 컴포넌트 데이터 연동** ✅ - 완료
  - ✅ 더미 데이터를 실제 Notion API 호출로 교체
  - ✅ 서버 컴포넌트에서 데이터 페칭 구현
  - ✅ 에러 핸들링 및 not-found 처리
  - ✅ Playwright MCP로 전체 데이터 플로우 E2E 테스트

- **Task 010-1: 핵심 기능 통합 테스트** ✅ - 완료
  - ✅ Playwright MCP를 사용한 전체 사용자 플로우 테스트
  - ✅ UUID 기반 견적서 조회 시나리오 테스트
  - ✅ 에러 핸들링 및 엣지 케이스 테스트

### Phase 4: PDF 기능 및 최적화

- **Task 011: PDF 다운로드 기능 구현**
  - `html2pdf.js` 패키지 설치 및 설정
  - PDF 생성 유틸리티 함수 구현 (`src/lib/pdf/generator.ts`)
  - `usePdfDownload` 커스텀 훅 구현
  - PDF 다운로드 버튼 연동

- **Task 012: PDF 스타일 최적화**
  - 인쇄용 CSS 스타일 최적화
  - A4 크기, 세로 방향 설정
  - 파일명 형식 적용 (`견적서_Q-2024-001.pdf`)
  - Playwright MCP로 PDF 다운로드 E2E 테스트

- **Task 013: 성능 최적화 및 배포 준비**
  - 메타데이터 및 SEO 최적화
  - Lighthouse 점수 80점 이상 달성
  - 환경 변수 검증 및 배포 설정
  - 최종 E2E 테스트 수행

## 기술 스택 요약

| 분류          | 기술                                    |
| ------------- | --------------------------------------- |
| **Framework** | Next.js 15.5.3 (App Router)             |
| **Runtime**   | React 19 + TypeScript 5                 |
| **Styling**   | TailwindCSS v4 + shadcn/ui (new-york)   |
| **API 연동**  | Notion API (`@notionhq/client`)         |
| **PDF 생성**  | html2pdf.js (클라이언트 사이드)         |
| **아이콘**    | Lucide React                            |
| **개발 도구** | ESLint + Prettier + Husky + lint-staged |

## 성공 기준

### MVP 완료 조건

1. UUID 링크로 견적서 페이지 접근 가능
2. 견적서 정보가 올바르게 표시됨
3. PDF 다운로드 기능 정상 동작
4. 모바일/데스크톱에서 정상 표시
5. 존재하지 않는 견적서 접근 시 404 표시

### 성능 목표

- 페이지 로딩: 3초 이내
- PDF 생성: 5초 이내
- Lighthouse 점수: 80점 이상
